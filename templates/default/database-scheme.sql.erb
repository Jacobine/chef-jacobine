CREATE DATABASE IF NOT EXISTS `typo3`;

USE `typo3`;

CREATE TABLE IF NOT EXISTS `versions` (
	`id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Unique id of version',
	`branch` varchar(4) DEFAULT NULL COMMENT 'Branch of version. E.g. 4.7, 6.0',
	`version` varchar(13) DEFAULT NULL COMMENT 'Specific version. E.g. 4.7.3, 4.7.4, 6.0.1',
	`date` varchar(23) DEFAULT NULL COMMENT 'Release date',
	`type` varchar(11) DEFAULT NULL COMMENT 'Type of release. E.g. development, regular, security',
	`checksum_tar_md5` varchar(32) DEFAULT NULL COMMENT 'MD5 checksum of tar.gz file',
	`checksum_tar_sha1` varchar(40) DEFAULT NULL COMMENT 'SHA1 checksum of tar.gz file',
	`checksum_zip_md5` varchar(32) DEFAULT NULL COMMENT 'MD5 checksum of zip file',
	`checksum_zip_sha1` varchar(40) DEFAULT NULL COMMENT 'SHA1 checksum of zip file',
	`url_tar` varchar(40) DEFAULT NULL COMMENT 'URL of tar.gz file',
	`url_zip` varchar(40) DEFAULT NULL COMMENT 'URL of zip file',
	`downloaded` tinyint(1) DEFAULT 0 COMMENT 'Flag if the version was downloaded. 0 for no, 1 for yes',
	`extracted` tinyint(1) DEFAULT 0 COMMENT 'Flag if the version was extracted. 0 for no, 1 for yes',
	`size_tar` int(11) DEFAULT 0 COMMENT 'Size of the downloaded tar.gz file in bytes',
	PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `phploc` (
	`id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Unique id of phploc record',
	`version` int(11) unsigned NOT NULL COMMENT 'id field of version table',
	`directories` int(11) unsigned DEFAULT '0' COMMENT 'Number of directories',
	`files` int(11) unsigned DEFAULT '0' COMMENT 'Number of files',
	`loc` int(11) unsigned DEFAULT '0' COMMENT 'Number of lines of code',
	`ncloc_classes` int(11) unsigned DEFAULT '0' COMMENT '',
	`cloc` int(11) unsigned DEFAULT '0' COMMENT 'Number of comment lines of code (CLOC)',
	`ncloc` int(11) unsigned DEFAULT '0' COMMENT 'Non-Comment Lines of Code (NCLOC)',
	`ccn` int(11) unsigned DEFAULT '0' COMMENT 'Cyclomatic Complexity',
	`ccn_methods` int(11) unsigned DEFAULT '0' COMMENT 'Cyclomatic Complexity of methods',
	`interfaces` int(11) unsigned DEFAULT '0' COMMENT 'Number of interfaces',
	`traits` int(11) unsigned DEFAULT '0' COMMENT 'Number of traits',
	`classes` int(11) unsigned DEFAULT '0' COMMENT 'Number of classes',
	`abstract_classes` int(11) unsigned DEFAULT '0' COMMENT 'Number of abstract classes',
	`concrete_classes` int(11) unsigned DEFAULT '0' COMMENT 'Number of concrete classes (classes with implementation code)',
	`anonymous_functions` int(11) unsigned DEFAULT '0' COMMENT 'Number of anonymous functions',
	`functions` int(11) unsigned DEFAULT '0' COMMENT 'Number of functions',
	`methods` int(11) unsigned DEFAULT '0' COMMENT 'Number of methods',
	`public_methods` int(11) unsigned DEFAULT '0' COMMENT 'Number of public methods (visibility public)',
	`non_public_methods` int(11) unsigned DEFAULT '0' COMMENT 'Number of non public methods (visibility private or protected)',
	`non_static_methods` int(11) unsigned DEFAULT '0' COMMENT 'Number of non static methods',
	`static_methods` int(11) unsigned DEFAULT '0' COMMENT 'Number of static methods',
	`constants` int(11) unsigned DEFAULT '0' COMMENT 'Number of constants',
	`class_constants` int(11) unsigned DEFAULT '0' COMMENT 'Number of class constants',
	`global_constants` int(11) unsigned DEFAULT '0' COMMENT 'Number of global constants',
	`test_classes` int(11) unsigned DEFAULT '0' COMMENT 'Number of test classes',
	`test_methods` int(11) unsigned DEFAULT '0' COMMENT 'Number of test methods',
	`ccn_by_loc` decimal(19,14) unsigned DEFAULT '0.00000000000000' COMMENT 'Cyclomatic Complexity / Lines of Code',
	`ccn_by_nom` decimal(19,14) unsigned DEFAULT '0.00000000000000' COMMENT 'Cyclomatic Complexity / Number of Methods',
	`ncloc_by_noc` decimal(19,14) unsigned DEFAULT '0.00000000000000' COMMENT 'Average Class Length (NCLOC)',
	`ncloc_by_nom` decimal(19,14) unsigned DEFAULT '0.00000000000000' COMMENT 'Average Method Length (NCLOC)',
	`namespaces` int(11) unsigned DEFAULT '0' COMMENT 'Number of namespaces',
	PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `linguist` (
	`id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Unique id of linguist record',
	`version` int(11) unsigned NOT NULL COMMENT 'id field of version table',
	`percent` decimal(5,2) unsigned DEFAULT '0.00' COMMENT 'Percent of programming language',
	`language` varchar(40) DEFAULT '' COMMENT 'Programming language',
	PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `gitweb` (
	`id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Unique id of gitweb project',
	`name` varchar(200) DEFAULT NULL COMMENT 'Name of git project',
	`git` varchar(200) DEFAULT NULL COMMENT 'Address of git repository',
	PRIMARY KEY (`id`),
	UNIQUE KEY `git` (`git`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;